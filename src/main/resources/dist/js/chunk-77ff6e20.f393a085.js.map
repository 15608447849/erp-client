{"version":3,"sources":["webpack:///./src/views/user/applyAfter.vue?f7ad","webpack:///src/views/user/applyAfter.vue","webpack:///./src/views/user/applyAfter.vue?728c","webpack:///./src/views/user/applyAfter.vue","webpack:///./src/views/user/applyAfter.vue?9f4e"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","padding-bottom","attrs","title","left-text","left-arrow","on","click-left","$event","$toPage","required","value","asTypeIndex","asTypeList","name","click","selectTypeShow","model","callback","$$v","show_0","expression","staticClass","_l","item","index","key","selectedType","saleReasonIndex","saleReasonList","label","selectReasonShow","show_1","selectedReason","type","placeholder","rows","autosize","apdesc","src","viewImg","size","deleteImg","img_select","color","_e","_v","background-color","pname","desc","manun","price","pdprice","num","pnum","thumb","imgURl","display","justify-content","position","slot","min","max","$set","checked-color","submitInfo","images","imgList","startPosition","show_img_index","show_img","staticRenderFns","applyAftervue_type_script_lang_js_","data","orderNo","val","addImgShow","goodList","canSubmit","mounted","$route","query","getDicts","getGoodsList","methods","_this","JNB","serverName","cls","method","params","JSON","parse","code","reprreason","_this2","_requestNative","url","push","length","splice","_this3","$ser_in","$loadUserInfo","comp","storeId","goods","forEach","_num","_selected","$request_img","context","arr","skuName","$toast","message","_this4","bl","i","es","loading","mask","duration","compid","orderid","orderno","loadAdress","upUrl","loadPath","orderFilePath","saleList","_i","element","slice","remotePath","fileName","uri","stringify","files","param","asAppArr","asType","_i2","clear","gstatus","asnum","pdno","reason","astype","$router","path","canBack","user_applyAftervue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_applyAfter_vue_vue_type_style_index_0_id_c216e582_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_applyAfter_vue_vue_type_style_index_0_id_c216e582_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-77ff6e20.f393a085.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"padding-bottom\":\"20px\"}},[_c('van-nav-bar',{attrs:{\"title\":\"申请售后\",\"left-text\":\"\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$toPage(-1)}}}),_c('van-cell-group',[_c('van-cell',{attrs:{\"required\":true,\"title\":\"售后类型\",\"value\":_vm.asTypeIndex||_vm.asTypeIndex==0?_vm.asTypeList[_vm.asTypeIndex].name:'请选择售后类型'},on:{\"click\":_vm.selectTypeShow}}),_c('van-actionsheet',{attrs:{\"title\":\"请选择类型\"},model:{value:(_vm.show_0),callback:function ($$v) {_vm.show_0=$$v},expression:\"show_0\"}},[_c('van-cell-group',{staticClass:\"text_center\"},_vm._l((_vm.asTypeList),function(item,index){return _c('van-cell',{key:index,attrs:{\"title\":item.name},on:{\"click\":function($event){return _vm.selectedType(index)}}})}),1)],1),_c('van-cell',{attrs:{\"required\":true,\"title\":\"退款原因\",\"value\":_vm.saleReasonIndex||_vm.saleReasonIndex==0?_vm.saleReasonList[_vm.saleReasonIndex].label:'请选择退款原因'},on:{\"click\":_vm.selectReasonShow}}),_c('van-actionsheet',{attrs:{\"title\":\"请选择退款原因\"},model:{value:(_vm.show_1),callback:function ($$v) {_vm.show_1=$$v},expression:\"show_1\"}},[_c('van-cell-group',{staticClass:\"text_center\"},_vm._l((_vm.saleReasonList),function(item,index){return _c('van-cell',{key:index,staticClass:\"out\",attrs:{\"title\":item.label},on:{\"click\":function($event){return _vm.selectedReason(index)}}})}),1)],1),_c('van-field',{attrs:{\"label\":\"原因描述\",\"type\":\"textarea\",\"placeholder\":\"请简单描述退货原因\",\"rows\":\"4\",\"autosize\":\"\"},model:{value:(_vm.apdesc),callback:function ($$v) {_vm.apdesc=$$v},expression:\"apdesc\"}}),_c('van-cell',{staticClass:\"border_bottom_none\",attrs:{\"required\":true,\"title\":\"上传图片\"}}),_c('div',{staticClass:\"img_box\"},[_vm._l((_vm.imgList),function(item,index){return _c('div',{key:index,staticClass:\"img_box_0\"},[_c('div',{staticClass:\"img_box_0_0\"},[_c('img',{attrs:{\"src\":item},on:{\"click\":function($event){return _vm.viewImg(index)}}}),_c('van-icon',{staticClass:\"cross_btn\",attrs:{\"name\":\"cross\",\"size\":\"16px\"},on:{\"click\":function($event){return _vm.deleteImg(index)}}})],1)])}),(_vm.addImgShow)?_c('div',{staticClass:\"img_box_0\",on:{\"click\":function($event){return _vm.img_select()}}},[_c('div',{staticClass:\"addImg\"},[_c('van-icon',{attrs:{\"name\":\"plus\",\"size\":\"60px\",\"color\":\"#999999\"}})],1)]):_vm._e()],2)],1),_c('h3',[_vm._v(\"选择退货商品\")]),_vm._l((_vm.goodList),function(item,index){return _c('van-card',{key:index,staticStyle:{\"background-color\":\"#FFFFFF\"},attrs:{\"title\":item.pname,\"desc\":item.manun,\"price\":item.pdprice,\"num\":item.pnum,\"thumb\":item.imgURl}},[_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"flex-end\",\"position\":\"relative\"},attrs:{\"slot\":\"bottom\"},slot:\"bottom\"},[_c('van-stepper',{attrs:{\"min\":\"0\",\"max\":item.pnum},model:{value:(item._num),callback:function ($$v) {_vm.$set(item, \"_num\", $$v)},expression:\"item._num\"}}),_c('van-checkbox',{staticClass:\"selected-btn\",attrs:{\"checked-color\":\"#07c160\"},model:{value:(item._selected),callback:function ($$v) {_vm.$set(item, \"_selected\", $$v)},expression:\"item._selected\"}})],1)])}),_c('div',{staticClass:\"button_box\",on:{\"click\":_vm.submitInfo}},[_vm._v(\"提交\")]),_c('van-image-preview',{attrs:{\"images\":_vm.imgList,\"startPosition\":_vm.show_img_index},model:{value:(_vm.show_img),callback:function ($$v) {_vm.show_img=$$v},expression:\"show_img\"}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\n<template>\r\n  <div style=\"padding-bottom: 20px;\">\r\n    <van-nav-bar title=\"申请售后\" left-text=\"\" left-arrow @click-left=\"$toPage(-1)\" />\r\n    <van-cell-group>\r\n      \r\n      <van-cell :required=\"true\" title=\"售后类型\" @click=\"selectTypeShow\" :value=\"asTypeIndex||asTypeIndex==0?asTypeList[asTypeIndex].name:'请选择售后类型'\" />\r\n      <van-actionsheet v-model=\"show_0\" title=\"请选择类型\">\r\n        <van-cell-group class=\"text_center\">\r\n          <van-cell v-for=\"(item,index) in asTypeList\" :key=\"index\" :title=\"item.name\" @click=\"selectedType(index)\" />\r\n        </van-cell-group>\r\n      </van-actionsheet>\r\n      \r\n      <van-cell :required=\"true\" title=\"退款原因\" @click=\"selectReasonShow\" :value=\"saleReasonIndex||saleReasonIndex==0?saleReasonList[saleReasonIndex].label:'请选择退款原因'\" />\r\n      <van-actionsheet v-model=\"show_1\" title=\"请选择退款原因\" >\r\n        <van-cell-group class=\"text_center\">\r\n          <van-cell v-for=\"(item,index) in saleReasonList\" class=\"out\" :key=\"index\" @click=\"selectedReason(index)\" :title=\"item.label\" />\r\n        </van-cell-group>\r\n      </van-actionsheet>\r\n\r\n\r\n      <van-field label=\"原因描述\" type=\"textarea\" placeholder=\"请简单描述退货原因\" v-model=\"apdesc\" rows=\"4\" autosize />\r\n      \r\n      <van-cell :required=\"true\" title=\"上传图片\" class=\"border_bottom_none\"></van-cell>\r\n      <div class=\"img_box\">\r\n        <div class=\"img_box_0\" v-for=\"(item,index) in imgList\" :key=\"index\" >\r\n          <div class=\"img_box_0_0\">\r\n            <img :src=\"item\" @click=\"viewImg(index)\" />\r\n            <van-icon name=\"cross\" class=\"cross_btn\" size=\"16px\" @click=\"deleteImg(index)\" />\r\n          </div>\r\n        </div>\r\n        <div class=\"img_box_0\" @click=\"img_select()\" v-if=\"addImgShow\">\r\n          <div class=\"addImg\">\r\n            <van-icon name=\"plus\" size=\"60px\" color=\"#999999\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n    </van-cell-group>\r\n    \r\n    <h3>选择退货商品</h3>\r\n    <van-card v-for=\"(item,index) in goodList\" :key=\"index\" :title=\"item.pname\" :desc=\"item.manun\" :price=\"item.pdprice\"\r\n      :num=\"item.pnum\" :thumb=\"item.imgURl\" style=\"background-color: #FFFFFF;\">\r\n      <div slot=\"bottom\" style=\"display: flex;justify-content: flex-end;position: relative;\">\r\n        <van-stepper v-model=\"item._num\" min=\"0\" :max=\"item.pnum\" /> \r\n        <van-checkbox v-model=\"item._selected\" checked-color=\"#07c160\" class=\"selected-btn\"></van-checkbox>\r\n      </div>\r\n    </van-card>\r\n    <div class=\"button_box\" @click=\"submitInfo\">提交</div>\r\n    \r\n    \r\n    <van-image-preview\r\n      v-model=\"show_img\"\r\n      :images=\"imgList\"\r\n      :startPosition=\"show_img_index\"\r\n    >\r\n    </van-image-preview>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { Toast } from 'vant';\r\n  export default {\r\n    data() {\r\n      return {\r\n        orderNo:null,//订单号\r\n        asTypeIndex:null,//售后类型下标\r\n        asTypeList:[{\r\n            name:'退货退款',\r\n            val:'1'\r\n          },\r\n          {\r\n            name:'仅退款',\r\n            val:'2'\r\n          }\r\n        ],//售后类型列表\r\n        show_0: false,//售后类型显示\r\n        saleReasonIndex:null,//退款原因下标\r\n        saleReasonList: [],//退款原因列表\r\n        show_1: false,//退款原因显示\r\n        apdesc:'',//退货原因\r\n        imgList: [],//上传的图片\r\n        addImgShow:true,//上传图片按钮显示\r\n        show_img:false,//图片预览\r\n        show_img_index:0,//图片预览索引\r\n        goodList: [],//商品数据\r\n        canSubmit:true,//防止提交按钮快速点击\r\n      }\r\n    },\r\n    mounted() {\r\n      this.orderNo = this.$route.query.orderNo;\r\n      this.getDicts();//获取售后原因\r\n      this.getGoodsList();//获取订单商品\r\n    },\r\n    methods: {\r\n      getDicts() {//获取售后原因\r\n          JNB.query({\r\n            serverName: 'globalServer',\r\n            cls: 'CommonModule',\r\n            method: 'getDicts',\r\n            params: {},\r\n            callback: data => {\r\n              data = JSON.parse(data);\r\n              if (data.code == 200) {\r\n                data.data = JSON.parse(data.data);\r\n                this.saleReasonList = data.data.reprreason;\r\n\r\n              }\r\n            }\r\n          })\r\n      },\r\n      selectTypeShow() {\r\n        this.show_0 = true;\r\n      },\r\n      selectedType(val){\r\n        this.asTypeIndex = val;\r\n        this.show_0 = false;\r\n      },\r\n      selectReasonShow(){\r\n        this.show_1 = true;\r\n      },\r\n      selectedReason(val){\r\n        this.saleReasonIndex = val;\r\n        this.show_1 = false;\r\n      },\r\n      img_select() {//选择图片\r\n        JNB._requestNative(\r\n          'openImageSelect',\r\n          (url) => {\r\n            if (url) {\r\n              this.imgList.push(url);\r\n              if(this.imgList.length>2){\r\n                this.addImgShow = false;\r\n              }\r\n            }\r\n          }\r\n        )\r\n      },\r\n      deleteImg(index){//删除图片\r\n        this.imgList.splice(index,1);\r\n        if(this.imgList.length<3){\r\n          this.addImgShow = true;\r\n        }\r\n      },\r\n      viewImg(index) {//查看图片\r\n        this.show_img = true;\r\n        this.show_img_index = index;\r\n      },\r\n      getGoodsList(){//获取订单商品\r\n        JNB.query({\r\n          serverName:'orderServer'+this.$ser_in(this.$loadUserInfo().comp.storeId),\r\n          cls:'OrderInfoModule',\r\n          method:'getOrderDetail',\r\n          params:[this.$loadUserInfo().comp.storeId,this.orderNo],\r\n          callback: data =>{\r\n            data = JSON.parse(data);\r\n            if(data.code === 200 ){\r\n                data.data.goods[0].goods.forEach(item=>{\r\n                    item._num = 0;\r\n                    item._selected = false;\r\n                })\r\n                this.$request_img({\r\n                    context: this,\r\n                    arr: data.data.goods[0].goods,\r\n                    skuName:'pdno'\r\n                })\r\n                this.goodList = data.data.goods[0].goods;\r\n            }else{\r\n                this.$toast(data.message);\r\n            }\r\n          }\r\n        })\r\n      },\r\n      submitInfo() {\r\n        if(!this.canSubmit){\r\n          return\r\n        }\r\n        this.canSubmit = false;\r\n        //先判断必填项\r\n        if(!this.asTypeIndex && this.asTypeIndex != 0){\r\n          this.$toast('请先选择售后类型');\r\n          this.canSubmit = true;\r\n          return\r\n        }\r\n        if(!this.saleReasonIndex && this.saleReasonIndex != 0){\r\n          this.$toast('请先选择退款原因');\r\n          this.canSubmit = true;\r\n          return\r\n        }\r\n        if(this.imgList.length == 0){\r\n          this.canSubmit = true;\r\n          this.$toast('请上传图片');\r\n          return\r\n        }\r\n        let bl = false\r\n        for(let i=0;i<this.goodList.length;i++){\r\n          if(this.goodList[i]._selected && this.goodList[i]._num > 0){\r\n            bl = true;\r\n          }\r\n        }\r\n        if(!bl){\r\n          this.canSubmit = true;\r\n          this.$toast('请选择商品');\r\n          return\r\n        }\r\n        Toast.loading({\r\n          mask: true,\r\n          duration:'toast',\r\n          message: '加载中...'\r\n        });\r\n        //上传图片\r\n        JNB.query({\r\n          serverName: 'globalServer',\r\n          cls: 'FileInfoModule',\r\n          method: 'fileServerInfo',\r\n          params: {\r\n            compid: this.goodList[0].compid,\r\n            orderid:this.goodList[0].orderno,\r\n          },\r\n          callback: (data) => {\r\n            data = JSON.parse(data).data;\r\n            let loadAdress = data.upUrl;\r\n            let loadPath = data.orderFilePath;\r\n            let saleList = []\r\n            for (let i = 0; i < this.imgList.length; i++) {\r\n              let element = this.imgList[i];\r\n              if (element.slice(0, 5) === 'image') {\r\n                saleList.push({\r\n                  remotePath: loadPath,\r\n                  fileName: i + '.png',\r\n                  uri: element\r\n                })\r\n              }\r\n            }\r\n            if (saleList.length > 0) {\r\n              JNB._requestNative(\r\n                'fileUpload',\r\n                JSON.stringify({\r\n                  url: loadAdress,\r\n                  files: saleList\r\n                }),\r\n                (data) => {\r\n                  data = JSON.parse(data);\r\n                  if(data.code == 200){\r\n                    let param = {\r\n                      asAppArr:[],\r\n                      orderno:this.orderNo,\r\n                      asType:this.asTypeList[this.asTypeIndex].val\r\n                    }\r\n                    for(let i=0;i<this.goodList.length;i++){\r\n                      if(this.goodList[i]._selected && this.goodList[i]._num > 0){\r\n                        Toast.clear();\r\n                        param.asAppArr.push({\r\n                          gstatus: 0,\r\n                          asnum: this.goodList[i]._num,\r\n                          pdno: this.goodList[i].pdno,\r\n                          orderno: this.goodList[i].orderno,\r\n                          compid: this.goodList[i].compid,\r\n                          reason: this.saleReasonList[this.saleReasonIndex].value,\r\n                          apdesc: this.apdesc,\r\n                          astype: this.asTypeList[this.asTypeIndex].val\r\n                        })\r\n                      }\r\n                    }\r\n                    JNB.query({\r\n                      serverName:'orderServer'+this.$ser_in(this.$loadUserInfo().comp.storeId),\r\n                      cls:'OrderOptModule',\r\n                      method:'afterSaleApp',\r\n                      params:param,\r\n                      callback: data =>{\r\n                        data = JSON.parse(data);\r\n                        if(data.code == 200){\r\n                          //页面跳转\r\n                          this.$router.push({\r\n                            path: \"/serviceAfterSalesRecord\",\r\n                            query: {\r\n                              canBack: 0\r\n                            }\r\n                          });\r\n                          Toast.clear();\r\n                          this.canSubmit = true;\r\n                        }else{\r\n                          Toast.clear();\r\n                          this.$toast(data.message);\r\n                          this.canSubmit = true;\r\n                        }\r\n                      }\r\n                    })\r\n                  }else{\r\n                    this.canSubmit = true;\r\n                    Toast.clear();\r\n                    this.$toast(data.message);\r\n                  }\r\n                }\r\n              )\r\n            }else{\r\n              this.canSubmit = true;\r\n              Toast.clear();\r\n            }\r\n          }\r\n        })\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .text_center {\r\n    text-align: center;\r\n  }\r\n  .border_bottom_none::after{\r\n    display: none;\r\n  }\r\n  .van-cell:not(:last-child):after {\r\n    left: 0;\r\n  }\r\n  .img_box{\r\n    display: flex;\r\n    padding: 0 20px 20px;\r\n    flex-wrap: wrap;\r\n  }\r\n  .img_box_0{\r\n    flex: 33.3333% 0 0;\r\n    margin-bottom: 20px;\r\n  }\r\n  .img_box_0_0{\r\n    width: 200px;\r\n    height: 200px;\r\n    border: 1px solid #EEEEEE;\r\n    position: relative;\r\n    margin: 0 auto;\r\n  }\r\n  .img_box_0_0 img{\r\n    width: 200px;\r\n    height: 200px;\r\n    display: block;\r\n  }\r\n  .addImg{\r\n    width: 200px;\r\n    height: 200px;\r\n    border: 1px solid #EEEEEE;\r\n    justify-content: center;\r\n    display: flex;\r\n    align-items: center;\r\n    margin: 0 auto;\r\n  }\r\n  .cross_btn{\r\n    position: absolute;\r\n    top: 0;\r\n    margin-left: -30px;\r\n    margin-top: -10px;\r\n    left: 200px;\r\n    background-color: #999999;\r\n    color: #FFFFFF;\r\n    padding: 6px;\r\n    border-radius: 50%;\r\n  }\r\n  h3{\r\n    font-weight: normal;\r\n    padding: 20px;\r\n    font-size: 28px;\r\n    line-height: 40px;\r\n    background-color: #FFFFFF;\r\n    margin: 20px 0 0 0;\r\n  }\r\n  .selected-btn{\r\n    position: absolute;\r\n    top: -100px;\r\n  }\r\n  .button_box{\r\n    margin: 20px 20px 0;\r\n    background-color: #f44;\r\n    font-size: 28px;\r\n    text-align: center;\r\n    color: #FFFFFF;\r\n    height: 100px;\r\n    line-height: 100px;\r\n    border-radius: 15px;\r\n  }\r\n  .van-card:not(:first-child) {\r\n    margin-top: 0px;\r\n  }\r\n  .van-nav-bar .van-icon{\r\n    color: #666666;\r\n  }\r\n  .van-card{\r\n    border-top: 1px solid #EEEEEE;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./applyAfter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./applyAfter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./applyAfter.vue?vue&type=template&id=c216e582&scoped=true&\"\nimport script from \"./applyAfter.vue?vue&type=script&lang=js&\"\nexport * from \"./applyAfter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./applyAfter.vue?vue&type=style&index=0&id=c216e582&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c216e582\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./applyAfter.vue?vue&type=style&index=0&id=c216e582&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./applyAfter.vue?vue&type=style&index=0&id=c216e582&scoped=true&lang=css&\""],"sourceRoot":""}