(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3091b070"],{"586d":function(t,o,n){"use strict";var s=n("5a6c"),a=n.n(s);a.a},"5a6c":function(t,o,n){},"713f":function(t,o,n){"use strict";n.r(o);var s=function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("div",{staticClass:"coupons"},[n("van-nav-bar",{attrs:{title:"我的优惠券",fixed:""},on:{"click-left":function(o){return t.$toPage(-1)},"click-right":function(o){return t.$toPage("toCoupons")}}},[n("van-icon",{attrs:{slot:"left",name:"arrow-left",size:"24px",color:"#666666"},slot:"left"}),n("span",{staticStyle:{"font-size":"15px"},attrs:{slot:"right"},slot:"right"},[t._v("领券中心")])],1),n("van-tabs",{on:{click:t.onClick}},[n("van-tab",{attrs:{title:"可使用",animated:""}},[n("conpous",{attrs:{coupons:t.coupons}}),t.flag?n("div",{staticClass:"bgImg"}):t._e()],1),n("van-tab",{attrs:{title:"已使用"}},[n("conpous",{attrs:{coupons:t.coupons}}),t.flag?n("div",{staticClass:"bgImg"}):t._e()],1),n("van-tab",{attrs:{title:"已过期"}},[n("conpous",{attrs:{coupons:t.coupons}}),t.flag?n("div",{staticClass:"bgImg"}):t._e()],1)],1)],1)},a=[],e=(n("ac6a"),n("9b15")),c={data:function(){return{coupons:[],count:0,flag:!0}},components:{conpous:e["a"]},mounted:function(){(256&this.$loadUserInfo().comp.authenticationStatus)>0&&this.getCoupons()},methods:{getCoupons:function(){var t=this;this.coupons=[],this.flag=!0,JNB.query({serverName:"orderServer"+this.$ser_in(this.$loadUserInfo().comp.storeId),cls:"CouponRevModule",method:"queryRevCouponList",params:{compid:this.$loadUserInfo().comp.storeId,type:this.count,pageSize:100,pageNo:1},callback:function(o){var n=JSON.parse(o);200===n.code?(t.coupons=n.data,n.data.length>0&&(t.flag=!1),t.coupons.forEach(function(o){0===t.count?o.btn="立即使用":1===t.count?o.btn="已使用":o.btn="已过期",2110===o.brulecode?(o.reduce="减",o.symbol="元"):2120===o.brulecode?(o.reduce="包邮",o.ladderVOS[0].offer=""):(o.reduce="",o.symbol="折")})):t.$toast.fail(n.message)}})},onClick:function(t){this.count=t,(256&this.$loadUserInfo().comp.authenticationStatus)>0&&this.getCoupons()}}},i=c,r=(n("7488"),n("2877")),u=Object(r["a"])(i,s,a,!1,null,"1733480b",null);o["default"]=u.exports},7488:function(t,o,n){"use strict";var s=n("758f"),a=n.n(s);a.a},"758f":function(t,o,n){},"9b15":function(t,o,n){"use strict";var s=function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("div",{staticClass:"coupons"},t._l(t.coupons,function(o,s){return n("div",{key:s,staticClass:"main"},[n("div",{staticClass:"title"},[t._v("\n      "+t._s(o.rulename)+"\n    ")]),n("div",{staticClass:"content"},[n("div",{staticClass:"couponsText"},[t._l(o.ladderVOS,function(s,a){return n("p",{key:a},[t._v("\n          满"+t._s(s.ladamt)+"元"+t._s(o.reduce)+t._s(s.offer)+t._s(o.symbol)+"\n        ")])}),o.validday?t._e():n("p",{staticClass:"time"},[t._v(t._s(o.startdate)+"~"+t._s(o.enddate))]),o.validday?n("p",{staticClass:"time"},[t._v("有效天数："+t._s(o.validday)+"天")]):t._e()],2),n("div",{staticClass:"btn",on:{click:function(n){return t.receive(o,s)}}},[t._v("\n        "+t._s(o.btn)+"\n      ")])])])}),0)},a=[],e={props:["coupons"],data:function(){return{}},computed:{userInfo:function(){return this.$loadUserInfo()}},methods:{receive:function(t,o){var n=this;"立即领取"===t.btn?JNB.query({serverName:"orderServer"+this.$ser_in(this.userInfo.comp.storeId),cls:"CouponRevModule",method:"revCoupon",params:{coupno:t.coupno,compid:t.compid,rulename:t.rulename,brulecode:t.brulecode,validday:t.validday,validflag:t.validflag,glbno:t.glbno,goods:t.goods,qlfno:t.qlfno,qlfval:t.qlfval,ladderVOS:t.ladderVOS},callback:function(o){var s=JSON.parse(o);200===s.code?(n.$emit("couponBtn",!1),t.btn="已领取",n.$toast(s.data)):n.$toast.fail(s.message)}}):"立即使用"===t.btn&&this.$router.push({path:"/shoppingCart",query:{cart:!0}})}}},c=e,i=(n("586d"),n("2877")),r=Object(i["a"])(c,s,a,!1,null,"0e215008",null);o["a"]=r.exports}}]);
//# sourceMappingURL=chunk-3091b070.43c86dbd.js.map