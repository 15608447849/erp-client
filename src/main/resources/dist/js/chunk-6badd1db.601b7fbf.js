(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6badd1db"],{"01bf":function(e,s,i){"use strict";i.r(s);var t=function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("div",{staticClass:"pharmacyInfo"},[i("van-nav-bar",{attrs:{title:"药店信息",fixed:""},on:{"click-left":function(s){return e.$toPage(-1)},"click-right":e.onClickModify}},[i("van-icon",{attrs:{slot:"left",name:"arrow-left",size:"24px",color:"#666666"},slot:"left"}),i("span",{staticStyle:{"font-size":"15px"},attrs:{slot:"right"},slot:"right"},[e._v(e._s(e.rightClick))])],1),i("van-cell-group",[i("van-field",{attrs:{label:"药店名称",placeholder:"请输入药店名称",size:"large",border:!1,required:"",disabled:e.disabled},model:{value:e.userInfo.storeName,callback:function(s){e.$set(e.userInfo,"storeName",s)},expression:"userInfo.storeName"}}),i("van-field",{attrs:{label:"城市",placeholder:"选择药店所处城市","is-link":"",size:"large",readonly:"",required:"",disabled:e.disabled},on:{click:e.reg_select_city},model:{value:e.city,callback:function(s){e.city=s},expression:"city"}}),i("van-field",{attrs:{label:"详细地址",placeholder:"请输入药店注册地址",size:"large",border:!1,required:"",disabled:e.disabled},model:{value:e.userInfo.address,callback:function(s){e.$set(e.userInfo,"address",s)},expression:"userInfo.address"}})],1),i("p",{staticClass:"tips_0"},[e._v("资质信息")]),i("p",{staticClass:"tips_1"},[e._v("证件越齐全，越快通过审核~")]),i("van-tabs",{attrs:{type:"card",animated:""},on:{click:e.tabClick},model:{value:e.type,callback:function(s){e.type=s},expression:"type"}},[i("van-tab",{attrs:{title:"医疗单位",name:"0"}},[i("ul",{staticClass:"reg_license"},e._l(e.reg_info,function(s,t){return s.isShow?i("li",{key:t},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.disabled,expression:"disabled"}],staticClass:"reg_src showDiv",on:{click:function(s){return e.viewImg(t)}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:!s.url,expression:"!reg.url"}],staticClass:"reg_src",on:{click:function(s){return e.reg_img_select(t)}}}),i("img",{directives:[{name:"show",rawName:"v-show",value:s.url,expression:"reg.url"}],attrs:{src:s.url},on:{click:function(s){return e.imgChange(t)}}}),e._v("\n          "+e._s(s.name)+"\n        ")]):e._e()}),0)]),i("van-tab",{attrs:{title:"药品经营企业",name:"1"}},[i("ul",{staticClass:"reg_license"},e._l(e.reg_info,function(s,t){return s.isShow?i("li",{key:t},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.disabled,expression:"disabled"}],staticClass:"reg_src showDiv",on:{click:function(s){return e.viewImg(t)}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:!s.url,expression:"!reg.url"}],staticClass:"reg_src",on:{click:function(s){return e.reg_img_select(t)}}}),i("img",{directives:[{name:"show",rawName:"v-show",value:s.url,expression:"reg.url"}],attrs:{src:s.url},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),e.imgChange(t)}}}),e._v("\n          "+e._s(s.name)+"\n        ")]):e._e()}),0)])],1),i("van-popup",{model:{value:e.show,callback:function(s){e.show=s},expression:"show"}},[i("p",{on:{click:function(s){return e.viewImg(e.uploadIndex)}}},[e._v("\n      "+e._s(e.$t("messages.regist.lookImg"))+"\n    ")]),i("p",{on:{click:function(s){return e.reg_img_select(e.uploadIndex)}}},[e._v("\n      "+e._s(e.$t("messages.regist.changeImg"))+"\n    ")])]),i("van-image-preview",{attrs:{"lazy-load":"",images:e.showImg},model:{value:e.mask,callback:function(s){e.mask=s},expression:"mask"}}),i("van-button",{attrs:{type:"danger",size:"large",block:"",disabled:e.disabled},on:{click:e.btnMyInvoice}},[e._v("\n    提交\n  ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"loading"},[i("div",[i("van-loading",{attrs:{size:"36px",vertical:"",type:"spinner",color:"#1989fa"}}),i("p",[e._v("信息上传中...")])],1)])],1)},a=[],r=(i("55dd"),i("ac6a"),i("b970")),n={data:function(){return{reg_info:[{id:10,isShow:!0,fileList:[],url:"",name:"营业执照",message:"请上传营业执照"},{id:11,isShow:!1,fileList:[],url:"",name:"药店经营许可证",message:"请上传药店经营许可证"},{id:12,isShow:!1,fileList:[],url:"",name:"GSP认证",message:"请上传GSP认证"},{id:15,isShow:!0,fileList:[],url:"",name:"医疗机构执业许可证",message:"请上传医疗机构执业许可证"},{id:13,isShow:!0,fileList:[],url:"",name:"采购提货人委托书",message:"请上传采购提货人委托书"},{id:14,isShow:!0,fileList:[],url:"",name:"采购提货人身份证",message:"请上传采购提货人身份证"},{id:16,isShow:!0,fileList:[],url:"",name:"诊疗科目副本",message:"请上传诊疗科目副本"}],show:!1,uploadIndex:0,mask:!1,showImg:[],loading:!1,userInfo:{},city:"",disabled:!0,rightClick:"修改",type:0}},mounted:function(){this.getInfo()},methods:{onClickModify:function(){var e=this;this.disabled?r["a"].confirm({title:"温馨提示",message:"修改药店信息后需要重新审核~"}).then(function(){e.rightClick="取消",e.disabled=!1}):(this.rightClick="修改",this.disabled=!0)},reg_select_city:function(){var e=this;JNB._requestNative("areaSelect",function(s){var i=JSON.parse(s);e.city=i.fullName,e.userInfo.addressCode=i.code})},reg_select_cityCode:function(){var e=this;JNB._requestNative("convertAreaCodeToFullName",this.userInfo.addressCode,function(s){e.city=s})},reg_img_select:function(e){var s=this;this.show=!1,JNB._requestNative("openImageSelect",function(i){i&&(s.reg_info[e].url=i)})},imgChange:function(e){this.show=!0,this.uploadIndex=e},viewImg:function(e){this.show=!1,this.reg_info[e].url&&(this.showImg[0]=this.reg_info[e].url,this.mask=!0)},btnMyInvoice:function(){this.loading=!0,this.disabled=!0,this.resetInfo()},resetImg:function(){var e=this;JNB._requestNative(JNB._transfer("globalServer","FileInfoModule","fileServerInfo"),JSON.stringify({compid:this.userInfo.storeId}),function(s){var i=[],t=JSON.parse(s);e.reg_info.forEach(function(e){"image"===e.url.slice(0,5)&&i.push({remotePath:t.data.companyFilePath,fileName:e.id+".jpg",uri:e.url})}),i.length>0?(e.loading=!0,JNB._requestNative("fileUpload",JSON.stringify({url:t.data.upUrl,files:i}),function(s){var i=JSON.parse(s);200===i.code?(e.loading=!1,e.$toast("修改成功！")):(e.$toast.fail("资质修改失败！"),e.loading=!1)})):(e.loading=!1,e.$toast("修改成功！"))})},resetInfo:function(){var e=this;JNB.query({serverName:"userServer",cls:"StoreManageModule",method:"appUpdateStoreInfo",params:{storeName:this.userInfo.storeName,address:this.userInfo.address,addressCode:this.userInfo.addressCode,storetype:this.type},callback:function(s){var i=JSON.parse(s);200===i.code?e.resetImg():(e.$toast.fail("信息修改失败！"),e.loading=!1)}})},getInfo:function(){var e=this,s=this;JNB.query({serverName:"userServer",cls:"LoginRegistrationModule",method:"getStoreSession",callback:function(i){var t=JSON.parse(i);200===t.code&&(s.userInfo=t.data.comp,e.tabClick(t.data.comp.storetype),s.reg_select_cityCode(),s.getImg())}})},getImg:function(){var e=this;JNB.query({serverName:"globalServer",cls:"FileInfoModule",method:"fileServerInfo",params:{compid:this.userInfo.storeId},callback:function(s){var i=JSON.parse(s);if(200===i.code){var t=i.data.ergodicUrl,a=i.data.companyFilePath,r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState&&200===r.status){var t=r.responseText;for(var n in s=JSON.parse(t).data.sort(),s)s[n].indexOf("jpg")>0&&e.reg_info.forEach(function(e){e.id==s[n].slice(1,3)&&(e.url=i.data.downPrev+a+s[n]+"?"+(new Date).getTime())})}},r.open("POST",t,!0),r.setRequestHeader("specify-path",a),r.setRequestHeader("ergodic-sub","false"),r.send(null)}else e.$toast.fail(i.message)}})},tabClick:function(e){1===e?(this.reg_info[1].isShow=!0,this.reg_info[2].isShow=!0,this.reg_info[3].isShow=!1,this.reg_info[6].isShow=!1,this.type=1):(this.reg_info[1].isShow=!1,this.reg_info[2].isShow=!1,this.reg_info[3].isShow=!0,this.reg_info[6].isShow=!0,this.type=0)}}},o=n,l=(i("cc56"),i("2877")),c=Object(l["a"])(o,t,a,!1,null,"1b3c8874",null);s["default"]=c.exports},"2f21":function(e,s,i){"use strict";var t=i("79e5");e.exports=function(e,s){return!!e&&t(function(){s?e.call(null,function(){},1):e.call(null)})}},"55dd":function(e,s,i){"use strict";var t=i("5ca1"),a=i("d8e8"),r=i("4bf8"),n=i("79e5"),o=[].sort,l=[1,2,3];t(t.P+t.F*(n(function(){l.sort(void 0)})||!n(function(){l.sort(null)})||!i("2f21")(o)),"Array",{sort:function(e){return void 0===e?o.call(r(this)):o.call(r(this),a(e))}})},cc56:function(e,s,i){"use strict";var t=i("cdbf"),a=i.n(t);a.a},cdbf:function(e,s,i){}}]);
//# sourceMappingURL=chunk-6badd1db.601b7fbf.js.map