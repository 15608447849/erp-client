(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37e1117c"],{"34e5":function(e,o,n){e.exports=n.p+"img/zfb.b87dff82.png"},4584:function(e,o,n){"use strict";var t=n("e413"),i=n.n(t);i.a},"687f":function(e,o,n){"use strict";n.r(o);var t=function(){var e=this,o=e.$createElement,n=e._self._c||o;return n("div",[n("van-nav-bar",{staticStyle:{height:"46px"},attrs:{title:"补开发票",fixed:""}},[n("van-icon",{attrs:{slot:"left",name:"arrow-left",size:"24px",color:"#666666"},on:{click:function(o){return e.$toPage(-1)}},slot:"left"})],1),n("div",{staticStyle:{height:"46px"}}),n("van-cell-group",[n("van-cell",{attrs:{required:!0,title:"发票类型",value:e.invoiceTypeIndex||0==e.invoiceTypeIndex?e.invoiceType[e.invoiceTypeIndex].name:"请选择发票类型"},on:{click:e.selectTypeShow}}),n("van-actionsheet",{attrs:{title:"请选择发票类型"},model:{value:e.show_0,callback:function(o){e.show_0=o},expression:"show_0"}},[n("van-cell-group",{staticClass:"text_center"},e._l(e.invoiceType,function(o,t){return n("van-cell",{key:t,attrs:{title:o.name},on:{click:function(o){return e.selectedType(t)}}})}),1)],1),n("van-cell",{attrs:{required:!0,title:"补开原因",value:e.invoiceReasonIndex||0==e.invoiceReasonIndex?e.invoiceReasonList[e.invoiceReasonIndex].label:"请选择原因"},on:{click:e.selectReasonShow}}),n("van-actionsheet",{attrs:{title:"请选择原因"},model:{value:e.show_1,callback:function(o){e.show_1=o},expression:"show_1"}},[n("van-cell-group",{staticClass:"text_center"},e._l(e.invoiceReasonList,function(o,t){return n("van-cell",{key:t,attrs:{title:o.label},on:{click:function(o){return e.selectedReason(t)}}})}),1)],1),n("van-field",{attrs:{label:"原因描述",type:"textarea",placeholder:"请简单描述退货原因",rows:"4",autosize:""},model:{value:e.apdesc,callback:function(o){e.apdesc=o},expression:"apdesc"}})],1),n("div",{staticClass:"invoiceInfo"},[n("div",[e._v("公司名称："+e._s(e.$loadUserInfo().comp.storeName))]),n("div",{directives:[{name:"show",rawName:"v-show",value:2==e.invoiceTypeIndex,expression:"invoiceTypeIndex == 2"}]},[e._v("注册地址："+e._s(e.$loadUserInfo().comp.address))]),n("div",[e._v("纳税人识别号："+e._s(e.invoiceInfo?e.invoiceInfo.taxpayer:""))]),n("div",{directives:[{name:"show",rawName:"v-show",value:2==e.invoiceTypeIndex,expression:"invoiceTypeIndex == 2"}]},[e._v("开户银行："+e._s(e.invoiceInfo?e.invoiceInfo.bankers:""))]),n("div",{directives:[{name:"show",rawName:"v-show",value:2==e.invoiceTypeIndex,expression:"invoiceTypeIndex == 2"}]},[e._v("银行账号："+e._s(e.invoiceInfo?e.invoiceInfo.account:""))]),n("div",{directives:[{name:"show",rawName:"v-show",value:2==e.invoiceTypeIndex,expression:"invoiceTypeIndex == 2"}]},[e._v("手机号码："+e._s(e.invoiceInfo?e.invoiceInfo.tel:""))])]),n("div",{directives:[{name:"show",rawName:"v-show",value:2==e.invoiceTypeIndex,expression:"invoiceTypeIndex == 2"}],staticClass:"adress"}),1==e.invoiceTypeIndex||2==e.invoiceTypeIndex?n("van-cell",{attrs:{title:"邮费",value:"￥"+e.postage,"value-class":"red"}}):e._e(),n("van-button",{attrs:{type:"danger",block:""},on:{click:e.commit}},[e._v("提交")]),n("van-actionsheet",{staticClass:"payment",attrs:{"close-on-click-overlay":e.overlay},model:{value:e.payment,callback:function(o){e.payment=o},expression:"payment"}},[e._l(e.payments,function(o,t){return n("div",{key:t,on:{click:function(o){return e.onSelectPay(t)}}},[n("img",{attrs:{src:o.url,alt:o.name}}),n("p",{staticClass:"name"},[e._v(e._s(o.name))])])}),n("p",{staticClass:"cancel",on:{click:e.onCancel}},[e._v("取消")])],2)],1)},i=[],s=(n("ac6a"),{data:function(){return{orderNo:null,invoiceType:[{val:1,name:"电子普通发票"},{val:2,name:"纸质普通发票"},{val:3,name:"增值税专用发票"}],invoiceTypeIndex:0,show_0:!1,invoiceReasonList:[],invoiceReasonIndex:null,show_1:!1,apdesc:"",invoiceInfo:{},postage:0,payType:1,userName:"",contactphone:"",flag:!0,payment:!1,payments:[{attr:"wxpay",name:"微信支付",url:n("bd76")},{attr:"alipay",name:"支付宝支付",url:n("34e5")}],overlay:!1,mask:!0,afsano:0,asType:0}},mounted:function(){this.orderNo=this.$route.query.orderNo,this.getInvoiceReasonList(),this.getInvoiceInfo(),this.getPostage(),this.getConsignee()},methods:{selectTypeShow:function(){this.show_0=!0},selectedType:function(e){this.invoiceTypeIndex=e,this.show_0=!1},getInvoiceReasonList:function(){var e=this;JNB.query({serverName:"globalServer",cls:"CommonModule",method:"getDicts",params:{},callback:function(o){o=JSON.parse(o),200==o.code&&(o.data=JSON.parse(o.data),e.invoiceReasonList=o.data.mireason)}})},selectReasonShow:function(){this.show_1=!0},selectedReason:function(e){this.invoiceReasonIndex=e,this.show_1=!1},getInvoiceInfo:function(){var e=this;JNB.query({serverName:"userServer",cls:"MyInvoiceModule",method:"getInvoice",params:{},callback:function(o){o=JSON.parse(o),200==o.code&&o.data.length>0&&(e.invoiceInfo=o.data[0])}})},getPostage:function(){var e=this;JNB.query({serverName:"orderServer"+this.$ser_in(this.$loadUserInfo().comp.storeId),cls:"PayModule",method:"showFeePayInfo",params:{orderno:this.orderNo,compid:this.$loadUserInfo().comp.storeId},callback:function(o){o=JSON.parse(o),200==o.code?(e.postage=o.data.payamt,e.mask=!1):e.$toast(o.message)}})},getConsignee:function(){var e=this;JNB.query({serverName:"userServer",cls:"MyDrugStoreInfoModule",method:"queryMyConsignee",params:{compid:this.$loadUserInfo().comp.storeId},callback:function(o){var n=JSON.parse(o);200==n.code?(e.user=n.data,n.data.forEach(function(o){2===o.cstatus&&(e.userName=o.contactname,e.contactphone=o.contactphone)}),1===e.user.length&&(e.userName=e.user[0].contactname,e.contactphone=e.user[0].contactphone)):(console.error(o),e.$toast.fail(n.message))}})},onSelectPay:function(e){var o=this;JNB._requestNative(this.payments[e].attr,JSON.stringify({orderno:this.orderNo,afsano:this.afsano}),function(e){0==e&&o.$store.state.payResult&&Dialog.alert({title:"温馨提示",message:"支付成功！"}).then(function(){o.$router.push({path:"/serviceAfterSalesRecord"})})})},commit:function(){var e=this;1==this.invoiceType[this.invoiceTypeIndex].val?this.asType=3:this.asType=4,this.invoice={invoiceInfo:{compName:this.$loadUserInfo().comp.storeName,address:this.$loadUserInfo().comp.address,bankers:this.invoiceInfo.bankers,account:this.invoiceInfo.account,taxpayer:this.invoiceInfo.taxpayer,tel:this.invoiceInfo.tel},address:{consignee:this.userName,contact:this.contactphone,compName:this.$loadUserInfo().comp.storeName,address:this.$loadUserInfo().comp.address}};var o=[{gstatus:0,orderno:this.orderNo,compid:this.$loadUserInfo().comp.storeId,reason:this.invoiceReasonList[this.invoiceReasonIndex].value,invoice:JSON.stringify(this.invoice),apdesc:this.apdesc,astype:this.asType,invoicetype:this.invoiceType[this.invoiceTypeIndex].val}];JNB.query({serverName:"orderServer"+this.$ser_in(this.$loadUserInfo().comp.storeId),cls:"OrderOptModule",method:"afterSaleApp",params:{orderno:this.orderNo,asAppArr:o,asType:this.asType,invoType:this.invoiceType[this.invoiceTypeIndex].val},callback:function(o){o=JSON.parse(o),200==o.code?(e.afsano=o.data,0==e.invoiceTypeIndex?(e.$toast(o.message),e.$router.push({path:"/serviceAfterSalesRecord"})):e.payment=!0):(e.$toast(o.message),e.flag=!1)}})},payResult:function(){var e=this;JNB.query({serverName:"orderServer"+this.$ser_in(this.$loadUserInfo().comp.storeId),cls:"PayModule",method:"getFeePayResult",params:{orderno:"190702000020",compid:this.$loadUserInfo().comp.storeId},callback:function(o){var n=JSON.parse(o);200==n.code||e.$toast(n.message)}})},onCancel:function(){this.payment=!1}}}),a=s,c=(n("4584"),n("2877")),r=Object(c["a"])(a,t,i,!1,null,"c2bee6a6",null);o["default"]=r.exports},bd76:function(e,o){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0MERGMEYwNzk5OEExMUU5QjJGQUY5QTJEQTUxNDkxOSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0MERGMEYwODk5OEExMUU5QjJGQUY5QTJEQTUxNDkxOSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQwREYwRjA1OTk4QTExRTlCMkZBRjlBMkRBNTE0OTE5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQwREYwRjA2OTk4QTExRTlCMkZBRjlBMkRBNTE0OTE5Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+bTv3+QAAC71JREFUeNrsXU9627YS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"},e413:function(e,o,n){}}]);
//# sourceMappingURL=chunk-37e1117c.f33e10bf.js.map