(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c91b8aa"],{"0854":function(e,s,i){},"6e78":function(e,s,i){"use strict";i.r(s);var t=function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("div",{staticClass:"certificate"},[i("van-nav-bar",{attrs:{title:"提交资质","left-text":"返回",fixed:"","left-arrow":""},on:{"click-left":function(s){return e.$toPage(-1)}}}),i("van-cell-group",[i("van-field",{attrs:{size:"large",label:"商务经理",maxlength:"11",placeholder:"如果没有对应的商务经理，请不用填写","error-message":e.message},on:{focus:function(s){e.message=""},input:e.blurBd},model:{value:e.bdTel,callback:function(s){e.bdTel=s},expression:"bdTel"}})],1),i("p",{staticClass:"reg_tip"},[e._v("\n    "+e._s(e.$t("messages.regist.tip"))+"\n  ")]),i("van-tabs",{attrs:{type:"card",animated:""},on:{click:e.tabClick}},[i("van-tab",{attrs:{title:"医疗单位"}},[i("ul",{staticClass:"reg_license"},e._l(e.reg_info,function(s,t){return s.isShow?i("li",{key:t},[i("div",{directives:[{name:"show",rawName:"v-show",value:!s.url,expression:"!reg.url"}],staticClass:"reg_src",on:{click:function(s){return e.reg_img_select(t)}}}),i("img",{directives:[{name:"show",rawName:"v-show",value:s.url,expression:"reg.url"}],attrs:{src:s.url},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),e.imgChange(t)}}}),e._v("\n          "+e._s(s.name)+"\n        ")]):e._e()}),0)]),i("van-tab",{attrs:{title:"药品经营企业"}},[i("ul",{staticClass:"reg_license"},e._l(e.reg_info,function(s,t){return s.isShow?i("li",{key:t},[i("div",{directives:[{name:"show",rawName:"v-show",value:!s.url,expression:"!reg.url"}],staticClass:"reg_src",on:{click:function(s){return e.reg_img_select(t)}}}),i("img",{directives:[{name:"show",rawName:"v-show",value:s.url,expression:"reg.url"}],attrs:{src:s.url},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),e.imgChange(t)}}}),e._v("\n          "+e._s(s.name)+"\n        ")]):e._e()}),0)])],1),i("van-popup",{model:{value:e.show,callback:function(s){e.show=s},expression:"show"}},[i("p",{on:{click:function(s){return e.viewImg(e.uploadIndex)}}},[e._v("\n      "+e._s(e.$t("messages.regist.lookImg"))+"\n    ")]),i("p",{on:{click:function(s){return e.reg_img_select(e.uploadIndex)}}},[e._v("\n      "+e._s(e.$t("messages.regist.changeImg"))+"\n    ")])]),i("van-image-preview",{attrs:{images:e.showImg},model:{value:e.mask,callback:function(s){e.mask=s},expression:"mask"}}),i("van-button",{attrs:{type:"info",size:"normal",block:""},on:{click:e.fun_btn_regFinish}},[e._v("\n    "+e._s(e.$t("messages.regist.reg_btn2"))+"\n  ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"loading"},[i("div",[i("van-loading",{attrs:{size:"36px",vertical:"",type:"spinner",color:"#1989fa"}}),i("p",[e._v("文件上传中...")])],1)])],1)},n=[],a=(i("ac6a"),{data:function(){return{reg_info:[{id:10,isShow:!0,fileList:[],url:"",name:"营业执照",message:"请上传营业执照"},{id:11,isShow:!1,fileList:[],url:"",name:"药店经营许可证",message:"请上传药店经营许可证"},{id:12,isShow:!1,fileList:[],url:"",name:"GSP认证",message:"请上传GSP认证"},{id:15,isShow:!0,fileList:[],url:"",name:"医疗机构执业许可证",message:"请上传医疗机构执业许可证"},{id:13,isShow:!0,fileList:[],url:"",name:"采购提货人委托书",message:"请上传采购提货人委托书"},{id:14,isShow:!0,fileList:[],url:"",name:"采购提货人身份证",message:"请上传采购提货人身份证"},{id:16,isShow:!0,fileList:[],url:"",name:"诊疗科目副本",message:"请上传诊疗科目副本"}],show:!1,uploadIndex:0,mask:!1,showImg:["https://img.yzcdn.cn/vant/cat.jpeg"],loading:!1,bdTel:"",type:0,compid:0,cityCode:0,userPhone:0,message:""}},computed:{userInfo:function(){return this.$loadUserInfo()}},mounted:function(){this.compid=this.$route.query.compid,this.cityCode=this.$route.query.cityCode,this.userPhone=this.$route.query.userPhone},methods:{fun_btn_regFinish:function(){var e=this;JNB.query({serverName:"userServer",cls:"StoreManageModule",method:"updateStoreCustomer",params:{uphone:this.bdTel,compid:this.compid,areac:this.cityCode,storetype:this.type},callback:function(s){var i=JSON.parse(s);200===i.code?(e.bdTel||e.bindUnqBd(),e.onloadIMG()):e.$toast.fail(i.message)}})},bindUnqBd:function(){JNB.query({serverName:"userServer",cls:"BDManageModule",method:"bindUnqBd",params:{areac:this.cityCode,compid:this.compid,uphone:this.userPhone},callback:function(e){JSON.parse(e)}})},onloadIMG:function(){var e=this;JNB._requestNative(JNB._transfer("globalServer","FileInfoModule","fileServerInfo"),JSON.stringify({compid:this.compid}),function(s){var i=[],t=JSON.parse(s);e.reg_info.forEach(function(e){"image"===e.url.slice(0,5)&&i.push({remotePath:t.data.companyFilePath,fileName:e.id+".jpg",uri:e.url})}),i.length>0?(e.loading=!0,JNB._requestNative("fileUpload",JSON.stringify({url:t.data.upUrl,files:i}),function(s){var i=JSON.parse(s);200===i.code?(e.loading=!1,e.$toast.success("注册成功！"),e.$router.push({name:"login"})):e.$toast("注册失败！")})):(e.$toast.success("注册成功,请联系相关BD上传资质证书！"),e.$router.push({name:"login"}))})},reg_img_select:function(e){var s=this;this.show=!1,JNB._requestNative("openImageSelect",function(i){i&&(s.reg_info[e].url=i)})},imgChange:function(e){this.show=!0,this.uploadIndex=e},viewImg:function(e){this.show=!1,this.mask=!0,this.showImg[0]=this.reg_info[e].url},tabClick:function(e){1===e?(this.reg_info[1].isShow=!0,this.reg_info[2].isShow=!0,this.reg_info[3].isShow=!1,this.reg_info[6].isShow=!1,this.type=1):(this.reg_info[1].isShow=!1,this.reg_info[2].isShow=!1,this.reg_info[3].isShow=!0,this.reg_info[6].isShow=!0,this.type=0)},blurBd:function(){var e=this;JNB.query({serverName:"userServer",cls:"StoreManageModule",method:"existStoreCustomer",params:{uphone:this.bdTel,compid:this.compid,areac:this.cityCode},callback:function(s){var i=JSON.parse(s);i.data?e.message="":e.message=i.message}})}}}),r=a,o=(i("a205"),i("2877")),l=Object(o["a"])(r,t,n,!1,null,"246f6547",null);s["default"]=l.exports},a205:function(e,s,i){"use strict";var t=i("0854"),n=i.n(t);n.a}}]);
//# sourceMappingURL=chunk-1c91b8aa.c3bff224.js.map