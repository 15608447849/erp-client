{"version":3,"sources":["webpack:///./src/views/user/myCollection.vue?9b7c","webpack:///src/views/user/myCollection.vue","webpack:///./src/views/user/myCollection.vue?c366","webpack:///./src/views/user/myCollection.vue","webpack:///./src/views/user/myCollection.vue?c0d7"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","title","fixed","on","click-left","$event","$toPage","slot","name","size","color","refresh","onRefresh","model","value","callback","$$v","isLoading","expression","_l","good","index","key","right-width","price","info","vatp","desc","manuName","prodname","lazy-load","thumb","imgURl","centered","click","toDetail","stopPropagation","SaveShopCart","_v","type","square","text","onClose","goods","length","_e","staticRenderFns","myCollectionvue_type_script_lang_js_","data","computed","userInfo","$loadUserInfo","mounted","getCollection","methods","_this","es","confirm","message","then","JNB","query","serverName","$ser_in","comp","storeId","cls","method","params","unqid","sku","result","JSON","parse","code","$toast","fail","catch","_this2","$manageGoodNum","_this3","forEach","push","i","spu","$request_img","context","arr","_this4","setTimeout","search","$router","path","user_myCollectionvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_myCollection_vue_vue_type_style_index_0_id_77104906_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_myCollection_vue_vue_type_style_index_0_id_77104906_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-496c0ccf.f5764446.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"myCollection\"},[_c('van-nav-bar',{attrs:{\"title\":\"我的收藏\",\"fixed\":\"\"},on:{\"click-left\":function($event){return _vm.$toPage(-1)}}},[_c('van-icon',{attrs:{\"slot\":\"left\",\"name\":\"arrow-left\",\"size\":\"24px\",\"color\":\"#666666\"},slot:\"left\"})],1),_c('van-pull-refresh',{on:{\"refresh\":_vm.onRefresh},model:{value:(_vm.isLoading),callback:function ($$v) {_vm.isLoading=$$v},expression:\"isLoading\"}},[_c('div',{staticClass:\"class\"},_vm._l((_vm.goods),function(good,index){return _c('div',{key:index,staticClass:\"content\"},[_c('van-swipe-cell',{attrs:{\"right-width\":60}},[_c('van-cell',[_c('van-card',{attrs:{\"price\":good.info.vatp == -1 ? '未认证' : good.info.vatp == -2 ? '未签约' : good.info.vatp / 100,\"desc\":good.info.manuName,\"title\":good.info.prodname,\"lazy-load\":\"\",\"thumb\":good.imgURl,\"centered\":\"\"},on:{\"click\":function($event){return _vm.toDetail(index)}}},[_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('van-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.SaveShopCart(index)}}},[_vm._v(\"\\n                  加入采购单\\n                \")])],1)])],1),_c('van-button',{attrs:{\"slot\":\"right\",\"type\":\"danger\",\"square\":\"\",\"text\":\"删除\"},on:{\"click\":function($event){return _vm.onClose(index)}},slot:\"right\"})],1)],1)}),0)]),(_vm.goods.length == 0)?_c('div',{staticClass:\"bgImg\"}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"myCollection\">\r\n    <van-nav-bar title=\"我的收藏\" fixed @click-left=\"$toPage(-1)\">\r\n      <van-icon name=\"arrow-left\" size=\"24px\" color=\"#666666\" slot=\"left\" />\r\n    </van-nav-bar>\r\n    <van-pull-refresh v-model=\"isLoading\" @refresh=\"onRefresh\">\r\n      <div class=\"class\">\r\n        <div v-for=\"(good, index) in goods\" :key=\"index\" class=\"content\">\r\n          <van-swipe-cell :right-width=\"60\">\r\n            <van-cell>\r\n              <van-card\r\n                :price=\"good.info.vatp == -1 ? '未认证' : good.info.vatp == -2 ? '未签约' : good.info.vatp / 100\"\r\n                :desc=\"good.info.manuName\"\r\n                :title=\"good.info.prodname\"\r\n                lazy-load\r\n                :thumb=\"good.imgURl\"\r\n                centered\r\n                @click=\"toDetail(index)\"\r\n              >\r\n                <div slot=\"footer\">\r\n                  <!-- <van-button size=\"mini\" @click.stop=\"search\">\r\n                    找相似\r\n                  </van-button> -->\r\n                  <van-button size=\"mini\" @click.stop=\"SaveShopCart(index)\">\r\n                    加入采购单\r\n                  </van-button>\r\n                </div>\r\n              </van-card>\r\n            </van-cell>\r\n            <van-button\r\n              slot=\"right\"\r\n              type=\"danger\"\r\n              square\r\n              text=\"删除\"\r\n              @click=\"onClose(index)\"\r\n            />\r\n          </van-swipe-cell>\r\n        </div>\r\n      </div>\r\n    </van-pull-refresh>\r\n    <div v-if=\"goods.length == 0\" class=\"bgImg\"></div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { Dialog } from 'vant';\r\nexport default {\r\n  data() {\r\n    return {\r\n      goods: [],\r\n      isLoading: false\r\n    };\r\n  },\r\n  computed: {\r\n    userInfo() {\r\n      return this.$loadUserInfo();\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getCollection();\r\n  },\r\n  methods: {\r\n    //  删除\r\n    onClose(index) {\r\n      Dialog.confirm({\r\n        title: '提示',\r\n        message: '确认要删除吗？'\r\n      }).then(() => {\r\n        JNB.query({\r\n          serverName: \"orderServer\" + this.$ser_in(this.userInfo.comp.storeId),\r\n          cls: \"MyCollectModule\",\r\n          method: \"del\",\r\n          params: {\r\n            unqid: this.goods[index].unqid,\r\n            sku: this.goods[index].sku\r\n          },\r\n          callback: data => {\r\n            let result = JSON.parse(data);\r\n\r\n            if (result.code == 200) {\r\n              this.getCollection();\r\n              this.$toast(result.message);\r\n            } else {\r\n              this.$toast.fail(result.message);\r\n            }\r\n          }\r\n        });\r\n      }).catch(() => {\r\n        // on cancel\r\n      })\r\n    },\r\n    //  加入购物车\r\n    SaveShopCart(index) {\r\n      this.$manageGoodNum(this, { sku: this.goods[index].sku }, -2).then(()=>{\r\n        this.$toast('添加成功！')\r\n      })\r\n    },\r\n    //  获取收藏商品\r\n    getCollection() {\r\n      JNB.query({\r\n        serverName: 'orderServer' + this.$ser_in(this.userInfo.comp.storeId),\r\n        cls: \"MyCollectModule\",\r\n        method: \"query\",\r\n        callback: data => {\r\n          let result = JSON.parse(data);\r\n          if (result.code == 200) {\r\n            this.goods = []\r\n            result.data.forEach(data => {\r\n              if(data.info){\r\n                this.goods.push(data);\r\n              }\r\n            })\r\n          } else {\r\n            this.$toast.fail(result.message);\r\n          }\r\n          this.goods.forEach((data, i) => {\r\n            this.goods[i].spu = data.info.spu;\r\n          });\r\n          if(this.goods.length > 0){\r\n            this.$request_img({\r\n            //获取商品图片\r\n              context: this,\r\n              arr: this.goods\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    onRefresh() {\r\n      setTimeout(() => {\r\n        this.getCollection();\r\n        this.$toast(\"刷新成功\");\r\n        this.isLoading = false;\r\n      }, 500);\r\n    },\r\n    search() {\r\n      this.$toast(\"功能开发中，敬请期待~\");\r\n    },\r\n    toDetail(index) {\r\n      this.$router.push({\r\n        path: \"goodsDetail\",\r\n        query: {\r\n          sku: this.goods[index].sku\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n.myCollection {\r\n  overflow: hidden;\r\n}\r\n.myCollection .van-pull-refresh {\r\n  width: 100%;\r\n  padding-top: 6.4vh;\r\n  box-sizing: border-box;\r\n}\r\n.myCollection .van-pull-refresh .class {\r\n  width: 100%;\r\n  min-height: 93.6vh;\r\n}\r\n.myCollection .content .van-swipe-cell .van-button {\r\n  height: 100%;\r\n}\r\n.myCollection .content .van-swipe-cell .van-cell{\r\n  background-color: transparent;\r\n}\r\n.myCollection .content .van-swipe-cell .van-cell .van-card{\r\n  border-radius: 10px;\r\n}\r\n.myCollection .bgImg{\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 80vh;\r\n  background: url('..\\..\\assets\\noneImg\\shoucang.png') no-repeat;\r\n  background-position: center center;\r\n  background-size: 50%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./myCollection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./myCollection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./myCollection.vue?vue&type=template&id=77104906&scoped=true&\"\nimport script from \"./myCollection.vue?vue&type=script&lang=js&\"\nexport * from \"./myCollection.vue?vue&type=script&lang=js&\"\nimport style0 from \"./myCollection.vue?vue&type=style&index=0&id=77104906&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"77104906\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./myCollection.vue?vue&type=style&index=0&id=77104906&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./myCollection.vue?vue&type=style&index=0&id=77104906&scoped=true&lang=css&\""],"sourceRoot":""}