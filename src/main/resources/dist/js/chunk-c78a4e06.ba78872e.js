(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c78a4e06"],{"37d7":function(t,s,e){"use strict";var n=e("5807"),a=e.n(n);a.a},5807:function(t,s,e){},"5e4c":function(t,s,e){"use strict";e.r(s);var n=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("van-nav-bar",{attrs:{title:"签到","left-arrow":""},on:{"click-left":function(s){return t.$toPage(-1)}}},[e("van-icon",{attrs:{slot:"left",name:"arrow-left",size:"24px",color:"#fff"},slot:"left"})],1),e("div",{staticClass:"head"},[e("div",{staticClass:"circle",on:{click:t.sign}},[e("p",{staticClass:"p2"},[t._v("签到")]),e("hr"),e("p",{staticClass:"p3"},[t._v("积分 +"+t._s(t.signgetJF))])]),e("span",{staticClass:"left"},[e("p",{staticClass:"p5"},[t._v("当前积分")]),e("p",{staticClass:"p4"},[t._v(t._s(t.countInfo[1]))])]),t._m(0),e("span",{staticClass:"right"},[e("p",{staticClass:"p5"},[t._v("累计签到"+t._s(t.signSum)+"天")]),e("button",{staticClass:"btn",on:{click:function(s){return t.$toPage("exchange")}}},[t._v("积分兑换")])])]),e("div",{staticClass:"foot"},[e("div",{staticClass:"date"},[t._v(t._s(t.signnowdate))]),e("div",[e("div",{staticClass:"calendar"},[e("table",{staticClass:"sign_tab",attrs:{border:"0px",cellpadding:"0px",cellspacing:"0px"}},[t._m(1),e("tbody",t._l(t.dateArr,function(s,n){return t.contains(s)?e("tr",{key:n},t._l(s,function(s){return t.isCheck(s)?e("td",{class:{"ui-state-default":!0}}):e("td",[t._v("\n                "+t._s(s)+"\n              ")])}),0):t._e()}),0)])])])]),e("div",{staticClass:"look",on:{click:function(s){return t.click()}}},[e("div",{staticClass:"look1"}),e("div",{staticClass:"look2"},[t._v("积分来源")])]),e("van-actionsheet",{attrs:{title:"签到记录"},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[e("ul",{staticClass:"signMsg"},[e("li",[e("span",[t._v("签到日期")]),e("span",[t._v("签到积分")])]),t._l(t.signHisList,function(s){return e("li",[e("span",[t._v(t._s(s.createdate)+" "+t._s(s.createtime))]),e("span",[t._v("本次签到获得"+t._s(s.integral)+"积分")])])})],2)])],1)},a=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"head-foot"},[e("p",{staticClass:"p1"},[t._v("坚持每天签到可以获得多重奖励哦~")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("thead",[e("tr",[e("th",[t._v("日")]),e("th",[t._v("一")]),e("th",[t._v("二")]),e("th",[t._v("三")]),e("th",[t._v("四")]),e("th",[t._v("五")]),e("th",[t._v("六")])])])}],i={data:function(){return{show:!1,countInfo:[],signSum:0,signnowdate:"",signSumInMouth:0,signHisList:[],signList:[],today:new Date,year:"",month:"",day:"",date:"",dateArr:[],checkin:[],signgetJF:0}},created:function(){this.year=this.today.getFullYear(),this.month=this.today.getMonth()+1,this.day=this.today.getDay(),this.date=this.today.getDate(),this.getCalendar()},components:{},computed:{},mounted:function(){this.getJF(),this.getHisSign(),this.getSignMsg()},methods:{click:function(){this.$toPage("integralRecord")},onSelect:function(t){this.show=!1},getSignMsg:function(){var t=this;JNB.query({serverName:"orderServer"+this.$ser_in(this.$loadUserInfo().comp.storeId),cls:"IntegralModule",method:"queryIntegralDetailBySign",params:{},callback:function(s){var e=JSON.parse(s);200===e.code?(t.signSumInMouth=e.data.signSum,t.signnowdate=e.data.nowDate,t.checkin=e.data.signList,t.signHisList=e.data.signMsg,t.rownum=e.data.signList.length):t.$toast.fail("未获取签到记录！")}})},getJF:function(){var t=this;JNB.query({serverName:"orderServer"+this.$ser_in(this.$loadUserInfo().comp.storeId),cls:"OrderInfoModule",method:"appCountCompInfo",params:{compid:this.$loadUserInfo().comp.storeId},callback:function(s){var e=JSON.parse(s);200===e.code?t.countInfo=e.data:t.$toast.fail(e.message)}})},sign:function(){var t=this;JNB.query({serverName:"orderServer"+this.$ser_in(this.$loadUserInfo().comp.storeId),cls:"IntegralModule",method:"signIn",params:{},callback:function(s){var e=JSON.parse(s);200===e.code?(t.$toast("签到成功！"),t.getJF(),t.getHisSign(),t.getSignMsg()):t.$toast.fail(e.message)}})},getHisSign:function(){var t=this;JNB.query({serverName:"orderServer"+this.$ser_in(this.$loadUserInfo().comp.storeId),cls:"IntegralModule",method:"getHisSignIn",params:{},callback:function(s){var e=JSON.parse(s);200===e.code?(t.signSum=e.data.times,t.signgetJF=e.data.signGetJf):t.$toast.fail(e.message)}})},isLeap:function(){var t=this.year;return t%4==0&&t%100>0||t%400==0&&t%3200>0},getLen:function(){var t=this.month;return 2==t?this.isLeap?29:28:t<8?t%2>0?31:30:t%2>0?30:31},getCalendarTime:function(){return this.year+"-"+this.month+"-"+this.date},getCalendar:function(){for(var t=this.getLen(),s=new Date(this.year,this.month-1,1),e=s.getDay(),n=new Array,a=0,i=0;i<6;i++){n[i]=new Array;for(var r=0;r<7;r++)a++,n[i][r]=a-e>0&&a-e<=t?a-e:""}this.dateArr=n},nextMonth:function(){12==this.month?(this.year++,this.month=1):this.month++,this.getCalendar()},prevMonth:function(){1==this.month?(this.year--,this.month=12):this.month--,this.getCalendar()},contains:function(t){return""!=t[0]||""!=t[1]||""!=t[2]||""!=t[3]||""!=t[4]||""!=t[5]||""!=t[6]},isCheck:function(t){for(var s in this.checkin)if(t==this.checkin[s])return!0;return!1}}},r=i,o=(e("37d7"),e("2877")),c=Object(o["a"])(r,n,a,!1,null,"08fc603a",null);s["default"]=c.exports}}]);
//# sourceMappingURL=chunk-c78a4e06.ba78872e.js.map